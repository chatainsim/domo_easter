{"id":128,"date":"2017-12-11T14:06:25","date_gmt":"2017-12-11T13:06:25","guid":{"rendered":"https:\/\/domo.easter.fr\/?p=128"},"modified":"2018-11-30T14:33:18","modified_gmt":"2018-11-30T13:33:18","slug":"vigicrue-v2","status":"publish","type":"post","link":"https:\/\/domo.easter.fr\/2017\/12\/11\/vigicrue-v2\/","title":{"rendered":"Vigicrue V2"},"content":{"rendered":"<p>Une v3 viens de sortir, <a href=\"https:\/\/domo.easter.fr\/2018\/01\/12\/vigicrue-v3-beta\/\">ici<\/a>.<\/p>\n<p>Le site de Vigicrue a chang\u00e9. Maintenant il utilise du json pour les donn\u00e9es.<\/p>\n<p>Un changement qui permet de simplifier tout \u00e7a en un seul script lua directement dans Domoticz :<\/p>\n<p>[pastacode lang=\u00a0\u00bbc\u00a0\u00bb user=\u00a0\u00bbchatainsim\u00a0\u00bb repos=\u00a0\u00bbscripts_domoticz\u00a0\u00bb path_id=\u00a0\u00bbvigicrue2.lua\u00a0\u00bb revision=\u00a0\u00bb\u00a0\u00bb highlight=\u00a0\u00bb\u00a0\u00bb lines=\u00a0\u00bb\u00a0\u00bb provider=\u00a0\u00bbgithub\u00a0\u00bb\/]<\/p>\n<p>Il suffit de modifier le d\u00e9but du script pour ajouter les ID des stations (<a href=\"https:\/\/domo.easter.fr\/2017\/02\/09\/vigicrue-et-domoticz\/\">je vous renvoi sur cette article pour trouver les IDs<\/a>).<\/p>\n<p>Les variables SIDXHeight et SIDXSpeed permettent de d\u00e9finir les IDX des sensors Domoticz et sont des tableaux.<\/p>\n<p>La cl\u00e9 correspond \u00e0 l&rsquo;ID de la station et la valeur \u00e0 l&rsquo;IDX Domoticz.<\/p>\n<p>Il faut aussi v\u00e9rifier l&#8217;emplacement de votre fichier JSON.lua qui n&rsquo;est pas forcement dans \/opt\/domoticz\/scripts\/lua.<\/p>\n<p>Amusez-vous bien.<\/p>\n<p>[EDIT] J&rsquo;ai rajout\u00e9 une v\u00e9rification dans le cas ou Vigicrue ne retourne pas de donn\u00e9es pour ne pas sortir une erreur dans les logs.<\/p>\n<p>Merci \u00e0 <span class=\"responsive-hide\"><a href=\"https:\/\/easydomoticz.com\/forum\/viewtopic.php?f=17&amp;t=5484&amp;p=46325\"><strong>lamouette <\/strong><\/a>sur le forum d&rsquo;easydomoticz de m&rsquo;avoir remonter ce cas.<\/span><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Une v3 viens de sortir, ici. Le site de Vigicrue a chang\u00e9. Maintenant il utilise du json pour les donn\u00e9es. Un changement qui permet de simplifier tout \u00e7a en un seul script lua directement dans Domoticz : [pastacode lang=\u00a0\u00bbc\u00a0\u00bb user=\u00a0\u00bbchatainsim\u00a0\u00bb repos=\u00a0\u00bbscripts_domoticz\u00a0\u00bb path_id=\u00a0\u00bbvigicrue2.lua\u00a0\u00bb revision=\u00a0\u00bb\u00a0\u00bb highlight=\u00a0\u00bb\u00a0\u00bb lines=\u00a0\u00bb\u00a0\u00bb provider=\u00a0\u00bbgithub\u00a0\u00bb\/] Il suffit de modifier le d\u00e9but du script pour [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":212,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_crdt_document":"","site-container-style":"default","site-container-layout":"default","site-sidebar-layout":"default","site-transparent-header":"default","disable-article-header":"default","disable-site-header":"default","disable-site-footer":"default","disable-content-area-spacing":"default","iawp_total_views":11,"footnotes":""},"categories":[2,4,13],"tags":[],"class_list":["post-128","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","category-domoticz","category-lua","category-vigicrue"],"_links":{"self":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/128","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/comments?post=128"}],"version-history":[{"count":5,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/128\/revisions"}],"predecessor-version":[{"id":155,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/128\/revisions\/155"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media\/212"}],"wp:attachment":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media?parent=128"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/categories?post=128"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/tags?post=128"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}