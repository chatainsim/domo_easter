{"id":187,"date":"2018-09-08T00:08:03","date_gmt":"2018-09-07T22:08:03","guid":{"rendered":"https:\/\/domo.easter.fr\/?p=187"},"modified":"2018-09-08T00:08:03","modified_gmt":"2018-09-07T22:08:03","slug":"detection-de-pluie-et-pluviometre","status":"publish","type":"post","link":"https:\/\/domo.easter.fr\/2018\/09\/08\/detection-de-pluie-et-pluviometre\/","title":{"rendered":"D\u00e9tection de pluie et pluviom\u00e8tre"},"content":{"rendered":"<p>J&rsquo;ai cherch\u00e9 pour avoir une notification lorsqu&rsquo;il pleut et pourquoi pas avoir la pluviom\u00e9trie mais je n&rsquo;ai rien trouv\u00e9 qui correspondait \u00e0 mes attentes.<\/p>\n<p>Les mod\u00e8les en RF433 Mhz semblent bien mais mon RFLink ne fonctionne pas tr\u00e8s bien faute de temps pour corriger mon probl\u00e8me d&rsquo;antenne.<\/p>\n<p>J&rsquo;ai bien trouv\u00e9 un pluviom\u00e8tre en Z-wave chez Popp mais il a quelques limitation.<\/p>\n<p>J&rsquo;ai fini par faire ma propre tambouille avec <a href=\"https:\/\/amzn.to\/2M7Kuye\">un d\u00e9tecteur universelle de chez Fibaro<\/a>, <a href=\"https:\/\/www.lextronic.fr\/temperature-meteo\/27641-capteur-pluviometre.html\">un pluviom\u00e8tre<\/a>, <a href=\"https:\/\/amzn.to\/2NUgqaU\">un d\u00e9tecteur de pluie<\/a>, <a href=\"https:\/\/amzn.to\/2NWUtYN\">une alimentation 12v<\/a>, <a href=\"https:\/\/amzn.to\/2wVpk1m\">des connecteurs Wago<\/a> et <a href=\"https:\/\/www.lextronic.fr\/boitiers-etanches\/22394-boitier-etanche-avec-3-presses-etoupes.html?search_query=OB12&amp;fast_search=fs\">un boitier \u00e9tanche<\/a>.<\/p>\n<p>J&rsquo;ai aussi raccord\u00e9 une <a href=\"https:\/\/amzn.to\/2O02kET\">sonde DS18B20<\/a> histoire d&rsquo;avoir la temp\u00e9rature en plus.<\/p>\n<p>Le d\u00e9tecteur universelle de Fibaro permet de connecter des contacts sec en entr\u00e9e, nous n&rsquo;utiliserons pas les sorties.<\/p>\n<p>Le principe est simple, pour le d\u00e9tecteur de pluie a chaque fois que le capteur re\u00e7oit de la pluie, il active un contact sec, il s&rsquo;agit de la m\u00eame chose pour le pluviom\u00e8tre, \u00e0 chaque fois que le godet bascule, il active un contact sec.<\/p>\n<p>Voici le c\u00e2blage :<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-192\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/pluvio_fibaro-e1536356822208.png\" alt=\"\" width=\"659\" height=\"387\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/pluvio_fibaro-e1536356822208.png 659w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/pluvio_fibaro-e1536356822208-300x176.png 300w\" sizes=\"auto, (max-width: 659px) 100vw, 659px\" \/><\/p>\n<p>Je n&rsquo;ai pas inclus la sonde DS18B20 pour ne pas surcharg\u00e9 le dessin.<\/p>\n<p>Et enfin, inclusion dans Domoticz en appuyant 3 fois rapidement sur le bouton B du d\u00e9tecteur universelle.<\/p>\n<p>Nous avons maintenant deux nouveaux interrupteurs dans Domoticz, un pour la d\u00e9tecteur de pluie et l&rsquo;autre pour le pluviom\u00e8tre.<\/p>\n<p>Il faut maintenant modifier le type de contact du module Z-Wave.<\/p>\n<p>Pour cela, il faut aller dans R\u00e9glages -&gt; Mat\u00e9riel. Puis cliquer sur R\u00e9glages de votre adaptateur Z-Wave :<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-193\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/reglages_zwave.png\" alt=\"\" width=\"276\" height=\"42\" \/><\/p>\n<p>Puis s\u00e9lectionner le module FGBS001 et modifier les param\u00e8tres 3 et 4 en Input NO (Normal Open) :<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-194\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/no.png\" alt=\"\" width=\"253\" height=\"167\" \/><\/p>\n<p>Pour le d\u00e9tecteur de pluie, rien \u00e0 faire de particulier si ce n&rsquo;est activer les notifications quand il passe \u00e0 ON.<\/p>\n<p>Pour le pluviom\u00e8tre, nous n&rsquo;avons qu&rsquo;un simple interrupteur qui passe \u00e0 ON \u00e0 chaque bascule du godet, il faut maintenant que cette bascule se transforme en mm de pluie.<\/p>\n<p>Il faut donc cr\u00e9er un capteur virtuel dans un Mat\u00e9riel de type Dummy :<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-196\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/virtual_dummy.png\" alt=\"\" width=\"638\" height=\"37\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/virtual_dummy.png 638w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/virtual_dummy-300x17.png 300w\" sizes=\"auto, (max-width: 638px) 100vw, 638px\" \/><\/p>\n<p>Et choisir Type de capteur : Pr\u00e9cipitations<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-197\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/precipit.png\" alt=\"\" width=\"425\" height=\"247\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/precipit.png 425w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2018\/09\/precipit-300x174.png 300w\" sizes=\"auto, (max-width: 425px) 100vw, 425px\" \/><\/p>\n<p>Puis cr\u00e9er un nouveau script de type DzVents \/ Device en modifiant la ligne 4 et la ligne 12 avec le nom de votre interrupteur cr\u00e9er par le d\u00e9tecteur universelle.<\/p>\n<p>Ainsi que la ligne 11 avec le non de votre capteur virtuel.<\/p>\n<p>[pastacode lang=\u00a0\u00bbc\u00a0\u00bb user=\u00a0\u00bbchatainsim\u00a0\u00bb repos=\u00a0\u00bbscripts_domoticz\u00a0\u00bb path_id=\u00a0\u00bbrainfall.lua\u00a0\u00bb revision=\u00a0\u00bb\u00a0\u00bb highlight=\u00a0\u00bb\u00a0\u00bb lines=\u00a0\u00bb\u00a0\u00bb provider=\u00a0\u00bbgithub\u00a0\u00bb\/]<\/p>\n<p>Si vous n&rsquo;utilisez pas le m\u00eame pluviom\u00e8tre que moi, il faut modifier la valeur ligne 13 avec la valeur du godet.<\/p>\n<p>Et voil\u00e0 \ud83d\ude42<\/p>\n","protected":false},"excerpt":{"rendered":"<p>J&rsquo;ai cherch\u00e9 pour avoir une notification lorsqu&rsquo;il pleut et pourquoi pas avoir la pluviom\u00e9trie mais je n&rsquo;ai rien trouv\u00e9 qui correspondait \u00e0 mes attentes. Les mod\u00e8les en RF433 Mhz semblent bien mais mon RFLink ne fonctionne pas tr\u00e8s bien faute de temps pour corriger mon probl\u00e8me d&rsquo;antenne. J&rsquo;ai bien trouv\u00e9 un pluviom\u00e8tre en Z-wave chez [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":200,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_crdt_document":"","site-container-style":"default","site-container-layout":"default","site-sidebar-layout":"default","site-transparent-header":"default","disable-article-header":"default","disable-site-header":"default","disable-site-footer":"default","disable-content-area-spacing":"default","iawp_total_views":168,"footnotes":""},"categories":[2,4,15],"tags":[],"class_list":["post-187","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","category-domoticz","category-lua","category-z-wave"],"_links":{"self":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/187","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/comments?post=187"}],"version-history":[{"count":7,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/187\/revisions"}],"predecessor-version":[{"id":199,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/187\/revisions\/199"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media\/200"}],"wp:attachment":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media?parent=187"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/categories?post=187"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/tags?post=187"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}