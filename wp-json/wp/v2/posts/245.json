{"id":245,"date":"2020-06-02T18:18:58","date_gmt":"2020-06-02T16:18:58","guid":{"rendered":"https:\/\/domo.easter.fr\/?p=245"},"modified":"2020-06-11T11:51:01","modified_gmt":"2020-06-11T09:51:01","slug":"porte-de-poulailler-connectee","status":"publish","type":"post","link":"https:\/\/domo.easter.fr\/2020\/06\/02\/porte-de-poulailler-connectee\/","title":{"rendered":"Porte de poulailler connect\u00e9e"},"content":{"rendered":"\n<p class=\"wp-block-paragraph\">A la fin du confinement, on a fait l\u2019acquisition de deux poules pondeuses. Elles logent dans un poulailler avec une porte coulissante.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">J&rsquo;ai vu pas mal de tutos pour g\u00e9rer des portes de types \u00ab\u00a0guillotines\u00a0\u00bb mais rien de vraiment concrets pour les portes coulissantes.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">J&rsquo;ai donc pas mal r\u00e9fl\u00e9chis aux solutions possibles et le poulailler ne me permettant pas de monter la porte, j&rsquo;ai gard\u00e9 le syst\u00e8me coulissant.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Pour cela j&rsquo;ai utilis\u00e9 un nodeMCU, un pont en H et un actionneur lin\u00e9aire.<\/p>\n\n\n\n<figure class=\"wp-block-gallery columns-3 is-cropped wp-block-gallery-1 is-layout-flex wp-block-gallery-is-layout-flex\"><ul class=\"blocks-gallery-grid\"><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"256\" height=\"256\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/42aa159d9d30eb3f26f2ed17034c0a3b.jpg\" alt=\"\" data-id=\"247\" data-full-url=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/42aa159d9d30eb3f26f2ed17034c0a3b.jpg\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=247\" class=\"wp-image-247\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/42aa159d9d30eb3f26f2ed17034c0a3b.jpg 256w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/42aa159d9d30eb3f26f2ed17034c0a3b-150x150.jpg 150w\" sizes=\"auto, (max-width: 256px) 100vw, 256px\" \/><figcaption class=\"blocks-gallery-item__caption\">NodeMCU<\/figcaption><\/figure><\/li><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"256\" height=\"256\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/799033398805515.jpg\" alt=\"\" data-id=\"246\" data-full-url=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/799033398805515.jpg\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=246\" class=\"wp-image-246\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/799033398805515.jpg 256w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/799033398805515-150x150.jpg 150w\" sizes=\"auto, (max-width: 256px) 100vw, 256px\" \/><figcaption class=\"blocks-gallery-item__caption\">L298N<\/figcaption><\/figure><\/li><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"256\" height=\"256\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/laa-35105.png\" alt=\"\" data-id=\"248\" data-full-url=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/laa-35105.png\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=248\" class=\"wp-image-248\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/laa-35105.png 256w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/laa-35105-150x150.png 150w\" sizes=\"auto, (max-width: 256px) 100vw, 256px\" \/><figcaption class=\"blocks-gallery-item__caption\">Linear actuator<\/figcaption><\/figure><\/li><\/ul><\/figure>\n\n\n\n<div class=\"wp-block-group\"><div class=\"wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow\">\n<div class=\"wp-block-group\"><div class=\"wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow\">\n<div class=\"wp-block-group\"><div class=\"wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow\">\n<div class=\"wp-block-group\"><div class=\"wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow\">\n<p class=\"wp-block-paragraph\">Le nodeMCU va servir une page web avec deux liens, un pour l&rsquo;ouverture, l&rsquo;autre pour la &#8230; fermeture. Il remontera l&rsquo;info \u00e0 Domoticz via un appel de l&rsquo;API. Le pont en H sert a inverser la polarit\u00e9 pour faire avancer ou reculer le moteur.<\/p>\n<\/div><\/div>\n<\/div><\/div>\n<\/div><\/div>\n<\/div><\/div>\n\n\n\n<div class=\"wp-block-group\"><div class=\"wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow\">\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"1024\" height=\"716\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Sketch_nodeLinear-1-1024x716.png\" alt=\"\" class=\"wp-image-277\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Sketch_nodeLinear-1-1024x716.png 1024w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Sketch_nodeLinear-1-300x210.png 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Sketch_nodeLinear-1-768x537.png 768w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Sketch_nodeLinear-1-1536x1074.png 1536w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Sketch_nodeLinear-1.png 1771w\" sizes=\"auto, (max-width: 1024px) 100vw, 1024px\" \/><figcaption>Les connexions<\/figcaption><\/figure>\n<\/div><\/div>\n\n\n\n<p class=\"wp-block-paragraph\">Le code arduino \u00e0 pousser sur le nodeMCU<\/p>\n\n\n<p>[pastacode lang=\u00a0\u00bbc\u00a0\u00bb user=\u00a0\u00bbchatainsim\u00a0\u00bb repos=\u00a0\u00bbscripts_domoticz\u00a0\u00bb path_id=\u00a0\u00bbnodemcu\/linear_actuator.ino\u00a0\u00bb revision=\u00a0\u00bb\u00a0\u00bb highlight=\u00a0\u00bb\u00a0\u00bb lines=\u00a0\u00bb\u00a0\u00bb provider=\u00a0\u00bbgithub\u00a0\u00bb\/]<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Il faudra modifier le ssid de votre wifi, ainsi que son mot de passe aux lignes 18 &amp; 19.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Dans Domoticz, il faudra cr\u00e9er deux interrupteurs virtuels, un pour l&rsquo;ouverture et la fermeture et l&rsquo;autre pour avoir le statut de la poste.<\/p>\n\n\n\n<figure class=\"wp-block-gallery columns-2 is-cropped wp-block-gallery-2 is-layout-flex wp-block-gallery-is-layout-flex\"><ul class=\"blocks-gallery-grid\"><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"394\" height=\"134\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_18-Window.png\" alt=\"\" data-id=\"256\" data-full-url=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_18-Window.png\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=256\" class=\"wp-image-256\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_18-Window.png 394w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_18-Window-300x102.png 300w\" sizes=\"auto, (max-width: 394px) 100vw, 394px\" \/><\/figure><\/li><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"392\" height=\"130\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_28-Window.png\" alt=\"\" data-id=\"257\" data-full-url=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_28-Window.png\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=257\" class=\"wp-image-257\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_28-Window.png 392w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_27_28-Window-300x99.png 300w\" sizes=\"auto, (max-width: 392px) 100vw, 392px\" \/><\/figure><\/li><\/ul><\/figure>\n\n\n\n<p class=\"wp-block-paragraph\">Il faut r\u00e9cup\u00e9rer l&rsquo;IDX de la porte pour le renseigner aux lignes 84 &amp; 90 \u00e0 la place du mien qui est 475. Oui je sais, c&rsquo;est crade mais j&rsquo;ai fais vite.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Lors de l&rsquo;ouverture ou de la fermeture de la porte, le statut de Porte poulailler sera mis \u00e0 jour par le nodeMCU.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Pour la passer en mode Porte, il faut l&rsquo;\u00e9diter et changer type par Door Contact :<\/p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"379\" height=\"169\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_32_06-door.png\" alt=\"\" class=\"wp-image-259\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_32_06-door.png 379w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/2020-06-02-12_32_06-door-300x134.png 300w\" sizes=\"auto, (max-width: 379px) 100vw, 379px\" \/><\/figure>\n\n\n\n<p class=\"wp-block-paragraph\">Pour l&rsquo;interrupteur Poules, qui commande la porte, il faut l&rsquo;\u00e9diter et renseigner les deux urls suivante :<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Action On : http:\/\/xxx.xxx.xxx.xxx\/?a=1<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Action Off : http:\/\/xxx.xxx.xxx.xxx\/?a=2<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">En remplacent l&rsquo;adresse IP par celle de votre nodeMCU, il faudra donc lui attribuer une IP fixe.<\/p>\n\n\n\n<figure class=\"wp-block-gallery columns-2 is-cropped wp-block-gallery-3 is-layout-flex wp-block-gallery-is-layout-flex\"><ul class=\"blocks-gallery-grid\"><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"1024\" height=\"766\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-1024x766.jpg\" alt=\"\" data-id=\"265\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=265\" class=\"wp-image-265\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-1024x766.jpg 1024w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-300x224.jpg 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-768x574.jpg 768w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-1536x1149.jpg 1536w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-2048x1532.jpg 2048w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174640-3-600x450.jpg 600w\" sizes=\"auto, (max-width: 1024px) 100vw, 1024px\" \/><figcaption class=\"blocks-gallery-item__caption\">La porte coulissante<\/figcaption><\/figure><\/li><li class=\"blocks-gallery-item\"><figure><img loading=\"lazy\" decoding=\"async\" width=\"1024\" height=\"768\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-1024x768.jpg\" alt=\"\" data-id=\"261\" data-link=\"https:\/\/domo.easter.fr\/?attachment_id=261\" class=\"wp-image-261\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-1024x768.jpg 1024w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-300x225.jpg 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-768x576.jpg 768w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-1536x1152.jpg 1536w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-2048x1536.jpg 2048w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174627-600x450.jpg 600w\" sizes=\"auto, (max-width: 1024px) 100vw, 1024px\" \/><figcaption class=\"blocks-gallery-item__caption\">Oui, c&rsquo;est tout en vrac<\/figcaption><\/figure><\/li><\/ul><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"1024\" height=\"768\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635-1024x768.jpg\" alt=\"\" class=\"wp-image-271\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635-1024x768.jpg 1024w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635-300x225.jpg 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635-768x576.jpg 768w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635-1536x1152.jpg 1536w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635-600x450.jpg 600w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/IMG_20200531_174635.jpg 2000w\" sizes=\"auto, (max-width: 1024px) 100vw, 1024px\" \/><figcaption>L&rsquo;actionneur lin\u00e9aire est dans le PVC de 80, avec un fond de bouteille pour la pluie.<br>De la r\u00e9cup&rsquo;,<\/figcaption><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"1024\" height=\"576\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Poulailler_2020-05-31_212944.jpg\" alt=\"\" class=\"wp-image-274\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Poulailler_2020-05-31_212944.jpg 1024w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Poulailler_2020-05-31_212944-300x169.jpg 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2020\/06\/Poulailler_2020-05-31_212944-768x432.jpg 768w\" sizes=\"auto, (max-width: 1024px) 100vw, 1024px\" \/><figcaption>J&rsquo;en ai profit\u00e9 pour mettre une cam\u00e9ra IP pour les surveiller !<\/figcaption><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>A la fin du confinement, on a fait l\u2019acquisition de deux poules pondeuses. Elles logent dans un poulailler avec une porte coulissante. J&rsquo;ai vu pas mal de tutos pour g\u00e9rer des portes de types \u00ab\u00a0guillotines\u00a0\u00bb mais rien de vraiment concrets pour les portes coulissantes. J&rsquo;ai donc pas mal r\u00e9fl\u00e9chis aux solutions possibles et le poulailler [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":265,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_crdt_document":"","site-container-style":"default","site-container-layout":"default","site-sidebar-layout":"default","site-transparent-header":"default","disable-article-header":"default","disable-site-header":"default","disable-site-footer":"default","disable-content-area-spacing":"default","iawp_total_views":39,"footnotes":""},"categories":[2,16],"tags":[20,18,19],"class_list":["post-245","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","category-domoticz","category-nodemcu","tag-arduino","tag-domoticz","tag-nodemcu"],"_links":{"self":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/245","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/comments?post=245"}],"version-history":[{"count":17,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/245\/revisions"}],"predecessor-version":[{"id":278,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/245\/revisions\/278"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media\/265"}],"wp:attachment":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media?parent=245"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/categories?post=245"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/tags?post=245"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}