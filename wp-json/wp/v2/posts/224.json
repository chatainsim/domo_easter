{"id":224,"date":"2019-10-04T09:55:30","date_gmt":"2019-10-04T07:55:30","guid":{"rendered":"https:\/\/domo.easter.fr\/?p=224"},"modified":"2019-10-04T10:16:56","modified_gmt":"2019-10-04T08:16:56","slug":"octoprint-et-domoticz","status":"publish","type":"post","link":"https:\/\/domo.easter.fr\/2019\/10\/04\/octoprint-et-domoticz\/","title":{"rendered":"Octoprint et Domoticz"},"content":{"rendered":"\n<p class=\"wp-block-paragraph\">Un petit script lua pour r\u00e9cup\u00e9rer les infos d&rsquo;Octoprint dans Domoticz.<\/p>\n\n\n\n<figure class=\"wp-block-image is-resized\"><img loading=\"lazy\" decoding=\"async\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/Capture-du2019\u00e9cran-2015-01-13-\u00e0-18.30.58.png\" alt=\"\" class=\"wp-image-225\" width=\"225\" height=\"189\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/Capture-du2019\u00e9cran-2015-01-13-\u00e0-18.30.58.png 458w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/Capture-du2019\u00e9cran-2015-01-13-\u00e0-18.30.58-300x252.png 300w\" sizes=\"auto, (max-width: 225px) 100vw, 225px\" \/><\/figure>\n\n\n\n<p class=\"wp-block-paragraph\">Il vous faut 7 Dummy devices :<\/p>\n\n\n\n<ul class=\"wp-block-list\"><li>OctoStatusIDX=&rsquo;387&prime; &#8212; type: Text pour afficher le status de l&rsquo;imprimante<\/li><li>OctoBebIDX=&rsquo;388&prime; &#8212; type: Temperature pour afficher la temp\u00e9rature du plateau<\/li><li>OctoHeadIDX=&rsquo;389&prime; &#8212; type: Temperature pour afficher la temp\u00e9rature de la t\u00eate d&rsquo;impression<\/li><li>OctoTotalTimeIDX=&rsquo;390&prime; &#8212; type: Text pour le temps total d&rsquo;impression<\/li><li>OctoCompleteIDX=&rsquo;391&prime; &#8212; type: Percentage pour le pourcentage d&rsquo;avancement<\/li><li>OctoPrintTimeIDX=&rsquo;392&prime; &#8212; type: Text pour la dur\u00e9e d&rsquo;impression pass\u00e9<\/li><li>OctoTimeLeftIDX=&rsquo;393&prime; &#8212; type: Text pour le temps restant.<\/li><\/ul>\n\n\n\n<p class=\"wp-block-paragraph\">Dans les param\u00e8tres du script, il faut modifier les IDX de ces devices lignes 14 \u00e0 20.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Renseigner l&rsquo;IP d&rsquo;Octoprint ligne 5, la cl\u00e9 API d&rsquo;Octoprint ligne 7.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Et enfin, si diff\u00e9rent, l&#8217;emplacement du script JSON.lua et de curl, lignes 9 et 11.<\/p>\n\n\n\n<p class=\"wp-block-paragraph\">Le script est disponible ici : <a href=\"https:\/\/github.com\/chatainsim\/scripts_domoticz\/blob\/master\/octoprint.lua\">https:\/\/github.com\/chatainsim\/scripts_domoticz\/blob\/master\/octoprint.lua<\/a><\/p>\n\n\n<p>[pastacode lang=\u00a0\u00bbc\u00a0\u00bb user=\u00a0\u00bbchatainsim\u00a0\u00bb repos=\u00a0\u00bbscripts_domoticz\u00a0\u00bb path_id=\u00a0\u00bboctoprint.lua\u00a0\u00bb revision=\u00a0\u00bb\u00a0\u00bb highlight=\u00a0\u00bb\u00a0\u00bb lines=\u00a0\u00bb\u00a0\u00bb provider=\u00a0\u00bbgithub\u00a0\u00bb\/]<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img loading=\"lazy\" decoding=\"async\" width=\"797\" height=\"148\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-temp.png\" alt=\"\" class=\"wp-image-231\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-temp.png 797w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-temp-300x56.png 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-temp-768x143.png 768w\" sizes=\"auto, (max-width: 797px) 100vw, 797px\" \/><figcaption>Temp\u00e9rature du plateau et de la t\u00eate.<\/figcaption><\/figure>\n\n\n\n<figure class=\"wp-block-image\"><img loading=\"lazy\" decoding=\"async\" width=\"1024\" height=\"349\" src=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-status-1024x349.png\" alt=\"\" class=\"wp-image-232\" srcset=\"https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-status-1024x349.png 1024w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-status-300x102.png 300w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-status-768x262.png 768w, https:\/\/domo.easter.fr\/wp-content\/uploads\/2019\/10\/octo-status.png 1261w\" sizes=\"auto, (max-width: 1024px) 100vw, 1024px\" \/><figcaption>Status de l&rsquo;imprimante et des temps d&rsquo;impression ainsi que le pourcentage d&rsquo;avancement.<\/figcaption><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>Un petit script lua pour r\u00e9cup\u00e9rer les infos d&rsquo;Octoprint dans Domoticz. Il vous faut 7 Dummy devices : OctoStatusIDX=&rsquo;387&prime; &#8212; type: Text pour afficher le status de l&rsquo;imprimante OctoBebIDX=&rsquo;388&prime; &#8212; type: Temperature pour afficher la temp\u00e9rature du plateau OctoHeadIDX=&rsquo;389&prime; &#8212; type: Temperature pour afficher la temp\u00e9rature de la t\u00eate d&rsquo;impression OctoTotalTimeIDX=&rsquo;390&prime; &#8212; type: Text pour [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":225,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_crdt_document":"","site-container-style":"default","site-container-layout":"default","site-sidebar-layout":"default","site-transparent-header":"default","disable-article-header":"default","disable-site-header":"default","disable-site-footer":"default","disable-content-area-spacing":"default","iawp_total_views":79,"footnotes":""},"categories":[17,2,4],"tags":[],"class_list":["post-224","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","category-3dprinting","category-domoticz","category-lua"],"_links":{"self":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/224","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/comments?post=224"}],"version-history":[{"count":6,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/224\/revisions"}],"predecessor-version":[{"id":233,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/posts\/224\/revisions\/233"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media\/225"}],"wp:attachment":[{"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/media?parent=224"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/categories?post=224"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/domo.easter.fr\/wp-json\/wp\/v2\/tags?post=224"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}