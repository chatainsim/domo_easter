<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	 xmlns:friends="wordpress-plugin-friends:feed-additions:1" >

<channel>
	<title>simon &#8211; Easter&#039;s Domo</title>
	<atom:link href="https://domo.easter.fr/author/simon/feed/" rel="self" type="application/rss+xml" />
	<link>https://domo.easter.fr</link>
	<description>Home Automation Stuff</description>
	<lastBuildDate>Thu, 11 Jun 2020 09:51:01 +0000</lastBuildDate>
	<language>fr-FR</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.9</generator>
	<item>
		<title>Porte de poulailler connectÃ©e</title>
		<link>https://domo.easter.fr/2020/06/02/porte-de-poulailler-connectee/</link>
					<comments>https://domo.easter.fr/2020/06/02/porte-de-poulailler-connectee/#respond</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Tue, 02 Jun 2020 16:18:58 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[nodemcu]]></category>
		<category><![CDATA[arduino]]></category>
		<category><![CDATA[domoticz]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=245</guid>

					<description><![CDATA[A la fin du confinement, on a fait lâ€™acquisition de deux poules pondeuses. Elles logent dans un poulailler avec une porte coulissante. J&#8217;ai vu pas mal de tutos pour gÃ©rer des portes de types Â«Â guillotinesÂ Â» mais rien de vraiment concrets pour les portes coulissantes. J&#8217;ai donc pas mal rÃ©flÃ©chis aux solutions possibles et le poulailler [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p class="wp-block-paragraph">A la fin du confinement, on a fait lâ€™acquisition de deux poules pondeuses. Elles logent dans un poulailler avec une porte coulissante.</p>



<p class="wp-block-paragraph">J&rsquo;ai vu pas mal de tutos pour gÃ©rer des portes de types Â«Â guillotinesÂ Â» mais rien de vraiment concrets pour les portes coulissantes.</p>



<p class="wp-block-paragraph">J&rsquo;ai donc pas mal rÃ©flÃ©chis aux solutions possibles et le poulailler ne me permettant pas de monter la porte, j&rsquo;ai gardÃ© le systÃ¨me coulissant.</p>



<p class="wp-block-paragraph">Pour cela j&rsquo;ai utilisÃ© un nodeMCU, un pont en H et un actionneur linÃ©aire.</p>



<figure class="wp-block-gallery columns-3 is-cropped wp-block-gallery-1 is-layout-flex wp-block-gallery-is-layout-flex"><ul class="blocks-gallery-grid"><li class="blocks-gallery-item"><figure><img fetchpriority="high" decoding="async" width="256" height="256" src="https://domo.easter.fr/wp-content/uploads/2020/06/42aa159d9d30eb3f26f2ed17034c0a3b.jpg" alt="" data-id="247" data-full-url="https://domo.easter.fr/wp-content/uploads/2020/06/42aa159d9d30eb3f26f2ed17034c0a3b.jpg" data-link="https://domo.easter.fr/?attachment_id=247" class="wp-image-247" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/42aa159d9d30eb3f26f2ed17034c0a3b.jpg 256w, https://domo.easter.fr/wp-content/uploads/2020/06/42aa159d9d30eb3f26f2ed17034c0a3b-150x150.jpg 150w" sizes="(max-width: 256px) 100vw, 256px" /><figcaption class="blocks-gallery-item__caption">NodeMCU</figcaption></figure></li><li class="blocks-gallery-item"><figure><img decoding="async" width="256" height="256" src="https://domo.easter.fr/wp-content/uploads/2020/06/799033398805515.jpg" alt="" data-id="246" data-full-url="https://domo.easter.fr/wp-content/uploads/2020/06/799033398805515.jpg" data-link="https://domo.easter.fr/?attachment_id=246" class="wp-image-246" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/799033398805515.jpg 256w, https://domo.easter.fr/wp-content/uploads/2020/06/799033398805515-150x150.jpg 150w" sizes="(max-width: 256px) 100vw, 256px" /><figcaption class="blocks-gallery-item__caption">L298N</figcaption></figure></li><li class="blocks-gallery-item"><figure><img decoding="async" width="256" height="256" src="https://domo.easter.fr/wp-content/uploads/2020/06/laa-35105.png" alt="" data-id="248" data-full-url="https://domo.easter.fr/wp-content/uploads/2020/06/laa-35105.png" data-link="https://domo.easter.fr/?attachment_id=248" class="wp-image-248" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/laa-35105.png 256w, https://domo.easter.fr/wp-content/uploads/2020/06/laa-35105-150x150.png 150w" sizes="(max-width: 256px) 100vw, 256px" /><figcaption class="blocks-gallery-item__caption">Linear actuator</figcaption></figure></li></ul></figure>



<div class="wp-block-group"><div class="wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow">
<div class="wp-block-group"><div class="wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow">
<div class="wp-block-group"><div class="wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow">
<div class="wp-block-group"><div class="wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow">
<p class="wp-block-paragraph">Le nodeMCU va servir une page web avec deux liens, un pour l&rsquo;ouverture, l&rsquo;autre pour la &#8230; fermeture. Il remontera l&rsquo;info Ã  Domoticz via un appel de l&rsquo;API. Le pont en H sert a inverser la polaritÃ© pour faire avancer ou reculer le moteur.</p>
</div></div>
</div></div>
</div></div>
</div></div>



<div class="wp-block-group"><div class="wp-block-group__inner-container is-layout-flow wp-block-group-is-layout-flow">
<figure class="wp-block-image size-large"><img decoding="async" width="1024" height="716" src="https://domo.easter.fr/wp-content/uploads/2020/06/Sketch_nodeLinear-1-1024x716.png" alt="" class="wp-image-277" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/Sketch_nodeLinear-1-1024x716.png 1024w, https://domo.easter.fr/wp-content/uploads/2020/06/Sketch_nodeLinear-1-300x210.png 300w, https://domo.easter.fr/wp-content/uploads/2020/06/Sketch_nodeLinear-1-768x537.png 768w, https://domo.easter.fr/wp-content/uploads/2020/06/Sketch_nodeLinear-1-1536x1074.png 1536w, https://domo.easter.fr/wp-content/uploads/2020/06/Sketch_nodeLinear-1.png 1771w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>Les connexions</figcaption></figure>
</div></div>



<p class="wp-block-paragraph">Le code arduino Ã  pousser sur le nodeMCU</p>


<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»nodemcu/linear_actuator.inoÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>



<p class="wp-block-paragraph">Il faudra modifier le ssid de votre wifi, ainsi que son mot de passe aux lignes 18 &amp; 19.</p>



<p class="wp-block-paragraph">Dans Domoticz, il faudra crÃ©er deux interrupteurs virtuels, un pour l&rsquo;ouverture et la fermeture et l&rsquo;autre pour avoir le statut de la poste.</p>



<figure class="wp-block-gallery columns-2 is-cropped wp-block-gallery-2 is-layout-flex wp-block-gallery-is-layout-flex"><ul class="blocks-gallery-grid"><li class="blocks-gallery-item"><figure><img decoding="async" width="394" height="134" src="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_18-Window.png" alt="" data-id="256" data-full-url="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_18-Window.png" data-link="https://domo.easter.fr/?attachment_id=256" class="wp-image-256" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_18-Window.png 394w, https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_18-Window-300x102.png 300w" sizes="(max-width: 394px) 100vw, 394px" /></figure></li><li class="blocks-gallery-item"><figure><img decoding="async" width="392" height="130" src="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_28-Window.png" alt="" data-id="257" data-full-url="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_28-Window.png" data-link="https://domo.easter.fr/?attachment_id=257" class="wp-image-257" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_28-Window.png 392w, https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_27_28-Window-300x99.png 300w" sizes="(max-width: 392px) 100vw, 392px" /></figure></li></ul></figure>



<p class="wp-block-paragraph">Il faut rÃ©cupÃ©rer l&rsquo;IDX de la porte pour le renseigner aux lignes 84 &amp; 90 Ã  la place du mien qui est 475. Oui je sais, c&rsquo;est crade mais j&rsquo;ai fais vite.</p>



<p class="wp-block-paragraph">Lors de l&rsquo;ouverture ou de la fermeture de la porte, le statut de Porte poulailler sera mis Ã  jour par le nodeMCU.</p>



<p class="wp-block-paragraph">Pour la passer en mode Porte, il faut l&rsquo;Ã©diter et changer type par Door Contact :</p>



<figure class="wp-block-image size-large"><img decoding="async" width="379" height="169" src="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_32_06-door.png" alt="" class="wp-image-259" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_32_06-door.png 379w, https://domo.easter.fr/wp-content/uploads/2020/06/2020-06-02-12_32_06-door-300x134.png 300w" sizes="(max-width: 379px) 100vw, 379px" /></figure>



<p class="wp-block-paragraph">Pour l&rsquo;interrupteur Poules, qui commande la porte, il faut l&rsquo;Ã©diter et renseigner les deux urls suivante :</p>



<p class="wp-block-paragraph">Action On : http://xxx.xxx.xxx.xxx/?a=1</p>



<p class="wp-block-paragraph">Action Off : http://xxx.xxx.xxx.xxx/?a=2</p>



<p class="wp-block-paragraph">En remplacent l&rsquo;adresse IP par celle de votre nodeMCU, il faudra donc lui attribuer une IP fixe.</p>



<figure class="wp-block-gallery columns-2 is-cropped wp-block-gallery-3 is-layout-flex wp-block-gallery-is-layout-flex"><ul class="blocks-gallery-grid"><li class="blocks-gallery-item"><figure><img decoding="async" width="1024" height="766" src="https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-1024x766.jpg" alt="" data-id="265" data-link="https://domo.easter.fr/?attachment_id=265" class="wp-image-265" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-1024x766.jpg 1024w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-300x224.jpg 300w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-768x574.jpg 768w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-1536x1149.jpg 1536w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-2048x1532.jpg 2048w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174640-3-600x450.jpg 600w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption class="blocks-gallery-item__caption">La porte coulissante</figcaption></figure></li><li class="blocks-gallery-item"><figure><img decoding="async" width="1024" height="768" src="https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-1024x768.jpg" alt="" data-id="261" data-link="https://domo.easter.fr/?attachment_id=261" class="wp-image-261" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-1024x768.jpg 1024w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-300x225.jpg 300w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-768x576.jpg 768w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-1536x1152.jpg 1536w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-2048x1536.jpg 2048w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174627-600x450.jpg 600w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption class="blocks-gallery-item__caption">Oui, c&rsquo;est tout en vrac</figcaption></figure></li></ul></figure>



<figure class="wp-block-image size-large"><img decoding="async" width="1024" height="768" src="https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635-1024x768.jpg" alt="" class="wp-image-271" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635-1024x768.jpg 1024w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635-300x225.jpg 300w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635-768x576.jpg 768w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635-1536x1152.jpg 1536w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635-600x450.jpg 600w, https://domo.easter.fr/wp-content/uploads/2020/06/IMG_20200531_174635.jpg 2000w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>L&rsquo;actionneur linÃ©aire est dans le PVC de 80, avec un fond de bouteille pour la pluie.<br>De la rÃ©cup&rsquo;,</figcaption></figure>



<figure class="wp-block-image size-large"><img decoding="async" width="1024" height="576" src="https://domo.easter.fr/wp-content/uploads/2020/06/Poulailler_2020-05-31_212944.jpg" alt="" class="wp-image-274" srcset="https://domo.easter.fr/wp-content/uploads/2020/06/Poulailler_2020-05-31_212944.jpg 1024w, https://domo.easter.fr/wp-content/uploads/2020/06/Poulailler_2020-05-31_212944-300x169.jpg 300w, https://domo.easter.fr/wp-content/uploads/2020/06/Poulailler_2020-05-31_212944-768x432.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>J&rsquo;en ai profitÃ© pour mettre une camÃ©ra IP pour les surveiller !</figcaption></figure>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2020/06/02/porte-de-poulailler-connectee/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>Octoprint et Domoticz</title>
		<link>https://domo.easter.fr/2019/10/04/octoprint-et-domoticz/</link>
					<comments>https://domo.easter.fr/2019/10/04/octoprint-et-domoticz/#comments</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 04 Oct 2019 07:55:30 +0000</pubDate>
				<category><![CDATA[3DPrinting]]></category>
		<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[lua]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=224</guid>

					<description><![CDATA[Un petit script lua pour rÃ©cupÃ©rer les infos d&#8217;Octoprint dans Domoticz. Il vous faut 7 Dummy devices : OctoStatusIDX=&#8217;387&#8242; &#8212; type: Text pour afficher le status de l&#8217;imprimante OctoBebIDX=&#8217;388&#8242; &#8212; type: Temperature pour afficher la tempÃ©rature du plateau OctoHeadIDX=&#8217;389&#8242; &#8212; type: Temperature pour afficher la tempÃ©rature de la tÃªte d&#8217;impression OctoTotalTimeIDX=&#8217;390&#8242; &#8212; type: Text pour [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p class="wp-block-paragraph">Un petit script lua pour rÃ©cupÃ©rer les infos d&rsquo;Octoprint dans Domoticz.</p>



<figure class="wp-block-image is-resized"><img decoding="async" src="https://domo.easter.fr/wp-content/uploads/2019/10/Capture-du2019Ã©cran-2015-01-13-Ã -18.30.58.png" alt="" class="wp-image-225" width="225" height="189" srcset="https://domo.easter.fr/wp-content/uploads/2019/10/Capture-du2019Ã©cran-2015-01-13-Ã -18.30.58.png 458w, https://domo.easter.fr/wp-content/uploads/2019/10/Capture-du2019Ã©cran-2015-01-13-Ã -18.30.58-300x252.png 300w" sizes="(max-width: 225px) 100vw, 225px" /></figure>



<p class="wp-block-paragraph">Il vous faut 7 Dummy devices :</p>



<ul class="wp-block-list"><li>OctoStatusIDX=&rsquo;387&prime; &#8212; type: Text pour afficher le status de l&rsquo;imprimante</li><li>OctoBebIDX=&rsquo;388&prime; &#8212; type: Temperature pour afficher la tempÃ©rature du plateau</li><li>OctoHeadIDX=&rsquo;389&prime; &#8212; type: Temperature pour afficher la tempÃ©rature de la tÃªte d&rsquo;impression</li><li>OctoTotalTimeIDX=&rsquo;390&prime; &#8212; type: Text pour le temps total d&rsquo;impression</li><li>OctoCompleteIDX=&rsquo;391&prime; &#8212; type: Percentage pour le pourcentage d&rsquo;avancement</li><li>OctoPrintTimeIDX=&rsquo;392&prime; &#8212; type: Text pour la durÃ©e d&rsquo;impression passÃ©</li><li>OctoTimeLeftIDX=&rsquo;393&prime; &#8212; type: Text pour le temps restant.</li></ul>



<p class="wp-block-paragraph">Dans les paramÃ¨tres du script, il faut modifier les IDX de ces devices lignes 14 Ã  20.</p>



<p class="wp-block-paragraph">Renseigner l&rsquo;IP d&rsquo;Octoprint ligne 5, la clÃ© API d&rsquo;Octoprint ligne 7.</p>



<p class="wp-block-paragraph">Et enfin, si diffÃ©rent, l&#8217;emplacement du script JSON.lua et de curl, lignes 9 et 11.</p>



<p class="wp-block-paragraph">Le script est disponible ici : <a href="https://github.com/chatainsim/scripts_domoticz/blob/master/octoprint.lua">https://github.com/chatainsim/scripts_domoticz/blob/master/octoprint.lua</a></p>


<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»octoprint.luaÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>



<figure class="wp-block-image"><img decoding="async" width="797" height="148" src="https://domo.easter.fr/wp-content/uploads/2019/10/octo-temp.png" alt="" class="wp-image-231" srcset="https://domo.easter.fr/wp-content/uploads/2019/10/octo-temp.png 797w, https://domo.easter.fr/wp-content/uploads/2019/10/octo-temp-300x56.png 300w, https://domo.easter.fr/wp-content/uploads/2019/10/octo-temp-768x143.png 768w" sizes="(max-width: 797px) 100vw, 797px" /><figcaption>TempÃ©rature du plateau et de la tÃªte.</figcaption></figure>



<figure class="wp-block-image"><img decoding="async" width="1024" height="349" src="https://domo.easter.fr/wp-content/uploads/2019/10/octo-status-1024x349.png" alt="" class="wp-image-232" srcset="https://domo.easter.fr/wp-content/uploads/2019/10/octo-status-1024x349.png 1024w, https://domo.easter.fr/wp-content/uploads/2019/10/octo-status-300x102.png 300w, https://domo.easter.fr/wp-content/uploads/2019/10/octo-status-768x262.png 768w, https://domo.easter.fr/wp-content/uploads/2019/10/octo-status.png 1261w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>Status de l&rsquo;imprimante et des temps d&rsquo;impression ainsi que le pourcentage d&rsquo;avancement.</figcaption></figure>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2019/10/04/octoprint-et-domoticz/feed/</wfw:commentRss>
			<slash:comments>37</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>PluviomÃ¨tre</title>
		<link>https://domo.easter.fr/2019/09/02/pluviometre/</link>
					<comments>https://domo.easter.fr/2019/09/02/pluviometre/#respond</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Mon, 02 Sep 2019 08:24:42 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[nodemcu]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=214</guid>

					<description><![CDATA[Bon, finalement le module Fibaro FGBS-001 ne semble plus fonctionner. Plus de remontÃ© de la tempÃ©rature ni du pluviomÃ¨tre ou du dÃ©tecteur de pluie. J&#8217;ai donc dÃ©cider de passer sur un NodeMCU. J&#8217;ai un NodeMCU pour gÃ©rer le pluviomÃ¨tre et le dÃ©tecteur de pluie, je verrais pour la sonde de tempÃ©rature DS18B20 plus tard. Le [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p class="wp-block-paragraph">Bon, finalement le module Fibaro FGBS-001 ne semble plus fonctionner.</p>



<p class="wp-block-paragraph">Plus de remontÃ© de la tempÃ©rature ni du pluviomÃ¨tre ou du dÃ©tecteur de pluie. J&rsquo;ai donc dÃ©cider de passer sur un NodeMCU.</p>



<figure class="wp-block-image"><img decoding="async" width="640" height="427" src="https://domo.easter.fr/wp-content/uploads/2019/09/640px-NodeMCU_DEVKIT_1.0.jpg" alt="" class="wp-image-215" srcset="https://domo.easter.fr/wp-content/uploads/2019/09/640px-NodeMCU_DEVKIT_1.0.jpg 640w, https://domo.easter.fr/wp-content/uploads/2019/09/640px-NodeMCU_DEVKIT_1.0-300x200.jpg 300w" sizes="(max-width: 640px) 100vw, 640px" /><figcaption>Merci <a href="https://fr.wikipedia.org/wiki/NodeMCU">Wikipedia </a>pour l&rsquo;image</figcaption></figure>



<p class="wp-block-paragraph">J&rsquo;ai un NodeMCU pour gÃ©rer le pluviomÃ¨tre et le dÃ©tecteur de pluie, je verrais pour la sonde de tempÃ©rature DS18B20 plus tard.</p>



<p class="wp-block-paragraph">Le cÃ¢blage :</p>



<figure class="wp-block-image"><img decoding="async" width="951" height="531" src="https://domo.easter.fr/wp-content/uploads/2019/09/Untitled-Sketch-2_bb.png" alt="" class="wp-image-219" srcset="https://domo.easter.fr/wp-content/uploads/2019/09/Untitled-Sketch-2_bb.png 951w, https://domo.easter.fr/wp-content/uploads/2019/09/Untitled-Sketch-2_bb-300x168.png 300w, https://domo.easter.fr/wp-content/uploads/2019/09/Untitled-Sketch-2_bb-768x429.png 768w" sizes="(max-width: 951px) 100vw, 951px" /></figure>



<p class="wp-block-paragraph">Le code :</p>


<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»nodemcu/pluvio.inoÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>



<p class="wp-block-paragraph">Pour le code, il faut modifier les lignes 4 et 5 pour configurer le Wifi.</p>



<p class="wp-block-paragraph">Et modifier les lignes 50 et 67 pour mettre l&rsquo;adresse ip et le port de Domoticz ainsi que l&rsquo;IDX du dummy.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2019/09/02/pluviometre/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>Script de surveillance de capteurs</title>
		<link>https://domo.easter.fr/2018/09/08/script-de-surveillance-de-capteurs/</link>
					<comments>https://domo.easter.fr/2018/09/08/script-de-surveillance-de-capteurs/#comments</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 07 Sep 2018 22:19:56 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[lua]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=203</guid>

					<description><![CDATA[Un post rapide pour partager un script qui permet de signaler quand un capteur ne rÃ©pond plus aprÃ¨s un certain temps. Pratique quand on a pas tout le temps le nez devant Domoticz et qu&#8217;une pile est arrivÃ©e en fin de vie sur un capteur sans fil. Il faut ajouter les capteurs Ã  surveiller Ã  [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>Un post rapide pour partager un script qui permet de signaler quand un capteur ne rÃ©pond plus aprÃ¨s un certain temps.</p>
<p>Pratique quand on a pas tout le temps le nez devant Domoticz et qu&rsquo;une pile est arrivÃ©e en fin de vie sur un capteur sans fil.</p>
<p>Il faut ajouter les capteurs Ã  surveiller Ã  partir de la ligne 16 et rajouter un ligne par capteur avec la durÃ©e en seconde :</p>
<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»deadsensors.luaÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2018/09/08/script-de-surveillance-de-capteurs/feed/</wfw:commentRss>
			<slash:comments>5</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>DÃ©tection de pluie et pluviomÃ¨tre</title>
		<link>https://domo.easter.fr/2018/09/08/detection-de-pluie-et-pluviometre/</link>
					<comments>https://domo.easter.fr/2018/09/08/detection-de-pluie-et-pluviometre/#comments</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 07 Sep 2018 22:08:03 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[lua]]></category>
		<category><![CDATA[z-wave]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=187</guid>

					<description><![CDATA[J&#8217;ai cherchÃ© pour avoir une notification lorsqu&#8217;il pleut et pourquoi pas avoir la pluviomÃ©trie mais je n&#8217;ai rien trouvÃ© qui correspondait Ã  mes attentes. Les modÃ¨les en RF433 Mhz semblent bien mais mon RFLink ne fonctionne pas trÃ¨s bien faute de temps pour corriger mon problÃ¨me d&#8217;antenne. J&#8217;ai bien trouvÃ© un pluviomÃ¨tre en Z-wave chez [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>J&rsquo;ai cherchÃ© pour avoir une notification lorsqu&rsquo;il pleut et pourquoi pas avoir la pluviomÃ©trie mais je n&rsquo;ai rien trouvÃ© qui correspondait Ã  mes attentes.</p>
<p>Les modÃ¨les en RF433 Mhz semblent bien mais mon RFLink ne fonctionne pas trÃ¨s bien faute de temps pour corriger mon problÃ¨me d&rsquo;antenne.</p>
<p>J&rsquo;ai bien trouvÃ© un pluviomÃ¨tre en Z-wave chez Popp mais il a quelques limitation.</p>
<p>J&rsquo;ai fini par faire ma propre tambouille avec <a href="https://amzn.to/2M7Kuye">un dÃ©tecteur universelle de chez Fibaro</a>, <a href="https://www.lextronic.fr/temperature-meteo/27641-capteur-pluviometre.html">un pluviomÃ¨tre</a>, <a href="https://amzn.to/2NUgqaU">un dÃ©tecteur de pluie</a>, <a href="https://amzn.to/2NWUtYN">une alimentation 12v</a>, <a href="https://amzn.to/2wVpk1m">des connecteurs Wago</a> et <a href="https://www.lextronic.fr/boitiers-etanches/22394-boitier-etanche-avec-3-presses-etoupes.html?search_query=OB12&amp;fast_search=fs">un boitier Ã©tanche</a>.</p>
<p>J&rsquo;ai aussi raccordÃ© une <a href="https://amzn.to/2O02kET">sonde DS18B20</a> histoire d&rsquo;avoir la tempÃ©rature en plus.</p>
<p>Le dÃ©tecteur universelle de Fibaro permet de connecter des contacts sec en entrÃ©e, nous n&rsquo;utiliserons pas les sorties.</p>
<p>Le principe est simple, pour le dÃ©tecteur de pluie a chaque fois que le capteur reÃ§oit de la pluie, il active un contact sec, il s&rsquo;agit de la mÃªme chose pour le pluviomÃ¨tre, Ã  chaque fois que le godet bascule, il active un contact sec.</p>
<p>Voici le cÃ¢blage :</p>
<p><img decoding="async" class="alignnone size-full wp-image-192" src="https://domo.easter.fr/wp-content/uploads/2018/09/pluvio_fibaro-e1536356822208.png" alt="" width="659" height="387" srcset="https://domo.easter.fr/wp-content/uploads/2018/09/pluvio_fibaro-e1536356822208.png 659w, https://domo.easter.fr/wp-content/uploads/2018/09/pluvio_fibaro-e1536356822208-300x176.png 300w" sizes="(max-width: 659px) 100vw, 659px" /></p>
<p>Je n&rsquo;ai pas inclus la sonde DS18B20 pour ne pas surchargÃ© le dessin.</p>
<p>Et enfin, inclusion dans Domoticz en appuyant 3 fois rapidement sur le bouton B du dÃ©tecteur universelle.</p>
<p>Nous avons maintenant deux nouveaux interrupteurs dans Domoticz, un pour la dÃ©tecteur de pluie et l&rsquo;autre pour le pluviomÃ¨tre.</p>
<p>Il faut maintenant modifier le type de contact du module Z-Wave.</p>
<p>Pour cela, il faut aller dans RÃ©glages -&gt; MatÃ©riel. Puis cliquer sur RÃ©glages de votre adaptateur Z-Wave :</p>
<p><img decoding="async" class="alignnone size-full wp-image-193" src="https://domo.easter.fr/wp-content/uploads/2018/09/reglages_zwave.png" alt="" width="276" height="42" /></p>
<p>Puis sÃ©lectionner le module FGBS001 et modifier les paramÃ¨tres 3 et 4 en Input NO (Normal Open) :</p>
<p><img decoding="async" class="alignnone size-full wp-image-194" src="https://domo.easter.fr/wp-content/uploads/2018/09/no.png" alt="" width="253" height="167" /></p>
<p>Pour le dÃ©tecteur de pluie, rien Ã  faire de particulier si ce n&rsquo;est activer les notifications quand il passe Ã  ON.</p>
<p>Pour le pluviomÃ¨tre, nous n&rsquo;avons qu&rsquo;un simple interrupteur qui passe Ã  ON Ã  chaque bascule du godet, il faut maintenant que cette bascule se transforme en mm de pluie.</p>
<p>Il faut donc crÃ©er un capteur virtuel dans un MatÃ©riel de type Dummy :</p>
<p><img decoding="async" class="alignnone size-full wp-image-196" src="https://domo.easter.fr/wp-content/uploads/2018/09/virtual_dummy.png" alt="" width="638" height="37" srcset="https://domo.easter.fr/wp-content/uploads/2018/09/virtual_dummy.png 638w, https://domo.easter.fr/wp-content/uploads/2018/09/virtual_dummy-300x17.png 300w" sizes="(max-width: 638px) 100vw, 638px" /></p>
<p>Et choisir Type de capteur : PrÃ©cipitations</p>
<p><img decoding="async" class="alignnone size-full wp-image-197" src="https://domo.easter.fr/wp-content/uploads/2018/09/precipit.png" alt="" width="425" height="247" srcset="https://domo.easter.fr/wp-content/uploads/2018/09/precipit.png 425w, https://domo.easter.fr/wp-content/uploads/2018/09/precipit-300x174.png 300w" sizes="(max-width: 425px) 100vw, 425px" /></p>
<p>Puis crÃ©er un nouveau script de type DzVents / Device en modifiant la ligne 4 et la ligne 12 avec le nom de votre interrupteur crÃ©er par le dÃ©tecteur universelle.</p>
<p>Ainsi que la ligne 11 avec le non de votre capteur virtuel.</p>
<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»rainfall.luaÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
<p>Si vous n&rsquo;utilisez pas le mÃªme pluviomÃ¨tre que moi, il faut modifier la valeur ligne 13 avec la valeur du godet.</p>
<p>Et voilÃ  <img src="https://s.w.org/images/core/emoji/17.0.2/72x72/1f642.png" alt="ðŸ™‚" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2018/09/08/detection-de-pluie-et-pluviometre/feed/</wfw:commentRss>
			<slash:comments>4</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>Avoir une notification lorsque le lave-linge a terminÃ©</title>
		<link>https://domo.easter.fr/2018/05/11/avoir-une-notification-lorsque-le-lave-linge-a-termine/</link>
					<comments>https://domo.easter.fr/2018/05/11/avoir-une-notification-lorsque-le-lave-linge-a-termine/#comments</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 11 May 2018 13:46:24 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[lua]]></category>
		<category><![CDATA[z-wave]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=176</guid>

					<description><![CDATA[Il s&#8217;agit en gros d&#8217;une traduction de cet article : https://www.gadget-freakz.com/2018/05/script-your-dryver-or-washingmachine/ Pour utiliser ce script, il faut avoir une prise connectÃ©e qui remonte la consommation en temps rÃ©el. J&#8217;utilise la mÃªme prise que Gadget-freaks, la Neo Coolcam que l&#8217;on trouve Ã  bas prix chez Gearbest : https://gearbest.com/home-gadgets/pp_581312.html?lkid=13669905 (lien sponsorisÃ© de Gadget-Freakz) Il faut dans un [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>Il s&rsquo;agit en gros d&rsquo;une traduction de cet article : <a href="https://www.gadget-freakz.com/2018/05/script-your-dryver-or-washingmachine/" target="_blank" rel="noopener">https://www.gadget-freakz.com/2018/05/script-your-dryver-or-washingmachine/</a></p>
<p>Pour utiliser ce script, il faut avoir une prise connectÃ©e qui remonte la consommation en temps rÃ©el.</p>
<p>J&rsquo;utilise la mÃªme prise que Gadget-freaks, la Neo Coolcam que l&rsquo;on trouve Ã  bas prix chez Gearbest : <a href="https://gearbest.com/home-gadgets/pp_581312.html?lkid=13669905" target="_blank" rel="noopener">https://gearbest.com/home-gadgets/pp_581312.html?lkid=13669905 </a>(lien sponsorisÃ© de Gadget-Freakz)</p>
<p><img decoding="async" class="alignnone size-full wp-image-178" src="https://domo.easter.fr/wp-content/uploads/2018/05/1522168677121294204.jpg" alt="" width="100" height="100" /></p>
<p>Il faut dans un premier temps crÃ©er deux variables utilisateur :</p>
<p>washingmachine_status &amp; washingmachine_counter au format Interger avec zÃ©ro comme valeur lors de la crÃ©ation.</p>
<p><img decoding="async" class="alignnone size-full wp-image-177" src="https://domo.easter.fr/wp-content/uploads/2018/05/washmachine_vu.png" alt="" width="1168" height="73" srcset="https://domo.easter.fr/wp-content/uploads/2018/05/washmachine_vu.png 1168w, https://domo.easter.fr/wp-content/uploads/2018/05/washmachine_vu-300x19.png 300w, https://domo.easter.fr/wp-content/uploads/2018/05/washmachine_vu-768x48.png 768w, https://domo.easter.fr/wp-content/uploads/2018/05/washmachine_vu-1024x64.png 1024w" sizes="(max-width: 1168px) 100vw, 1168px" /></p>
<p>Et crÃ©er le script en question au format lua (Lua/Time) :</p>
<p>En changeant le nom de votre prise connectÃ©e :</p>
<p><span class="pl-k">local</span> energy_consumption <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&lsquo;</span><em><strong>Zwave LaveLinge</strong></em><span class="pl-pds">&lsquo;</span></span></p>
<p>[pastacode lang=Â Â»markupÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»script_time_wasmachine.luaÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
<p>Et voilÃ .</p>
<p>&nbsp;</p>
<p>Merci Ã  Gadget-Freakz</p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2018/05/11/avoir-une-notification-lorsque-le-lave-linge-a-termine/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>Liste des blogs que je suis dans mon lecteur de flux RSS</title>
		<link>https://domo.easter.fr/2018/04/27/liste-des-blogs-que-je-suis-dans-mon-lecteur-de-flux-rss/</link>
					<comments>https://domo.easter.fr/2018/04/27/liste-des-blogs-que-je-suis-dans-mon-lecteur-de-flux-rss/#respond</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 27 Apr 2018 08:35:48 +0000</pubDate>
				<category><![CDATA[Divers]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=169</guid>

					<description><![CDATA[Voici la liste des blogs en liens avec la Domotique que j&#8217;ai dans mon lecteur de flux RSS, c&#8217;est mis en vrac, sans trie. Tous ne se valent pas, certains ne postent que des bons plans, pas forcement utiles d&#8217;ailleurs (il faudrait que je fasse du trie). Ils ne parlent pas tous de Domoticz, il [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>Voici la liste des blogs en liens avec la Domotique que j&rsquo;ai dans <a href="https://tt-rss.org/" target="_blank" rel="noopener">mon lecteur de flux RSS</a>, c&rsquo;est mis en vrac, sans trie.<br />
Tous ne se valent pas, certains ne postent que des bons plans, pas forcement utiles d&rsquo;ailleurs (il faudrait que je fasse du trie).</p>
<p>Ils ne parlent pas tous de Domoticz, il y a aussi du Jeedom et du Home Assistant, mais comme la domotique est universelle, les idÃ©es peuvent Ãªtre rÃ©adaptÃ©es.</p>
<p>Si vous avez des blogs sympas Ã  partager, n&rsquo;hÃ©sitez pas Ã  les mettre dans les commentaires.</p>
<ul>
<li><a href="http://www.abavala.com" target="_blank" rel="noopener">http://www.abavala.com</a></li>
<li><a href="https://anderson69s.com/blog" target="_blank" rel="noopener">https://anderson69s.com/blog</a></li>
<li><a href="http://www.ca-sert-a-quoi.com" target="_blank" rel="noopener">http://www.ca-sert-a-quoi.com</a></li>
<li><a href="http://debrouilhome.fr" target="_blank" rel="noopener">http://debrouilhome.fr</a></li>
<li><a href="https://devotics.fr" target="_blank" rel="noopener">https://devotics.fr</a></li>
<li><a href="http://domo-attitude.fr" target="_blank" rel="noopener">http://domo-attitude.fr</a></li>
<li><a href="https://www.domo-blog.fr" target="_blank" rel="noopener">https://www.domo-blog.fr</a></li>
<li><a href="https://lunarok-domotique.com" target="_blank" rel="noopener">https://lunarok-domotique.com</a></li>
<li><a href="http://www.domotique-info.fr" target="_blank" rel="noopener">http://www.domotique-info.fr</a></li>
<li><a href="http://domotiquetechnoseb27.com" target="_blank" rel="noopener">http://domotiquetechnoseb27.com</a></li>
<li><a href="http://faire-ca-soi-meme.fr" target="_blank" rel="noopener">http://faire-ca-soi-meme.fr</a></li>
<li><a href="https://www.gadget-freakz.com" target="_blank" rel="noopener">https://www.gadget-freakz.com</a></li>
<li><a href="https://guillaumebraillon.fr" target="_blank" rel="noopener">https://guillaumebraillon.fr</a></li>
<li><a href="https://www.justegeek.fr" target="_blank" rel="noopener">https://www.justegeek.fr</a></li>
<li><a href="http://sarakha63-domotique.fr" target="_blank" rel="noopener">http://sarakha63-domotique.fr</a></li>
<li><a href="https://maison-et-domotique.com" target="_blank" rel="noopener">https://maison-et-domotique.com</a></li>
</ul>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2018/04/27/liste-des-blogs-que-je-suis-dans-mon-lecteur-de-flux-rss/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>Motion v2.2</title>
		<link>https://domo.easter.fr/2018/04/27/motion-v2-2/</link>
					<comments>https://domo.easter.fr/2018/04/27/motion-v2-2/#respond</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 27 Apr 2018 08:27:04 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[light]]></category>
		<category><![CDATA[lua]]></category>
		<category><![CDATA[xiaomi]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=167</guid>

					<description><![CDATA[Un mini post pour signaler la mise Ã  jour du script Motion (Ã©clairage sur dÃ©tection de mouvement). J&#8217;ai simplement enlevÃ© la partie extinction avec dÃ©lai car cela gÃ©nÃ©rait des problÃ¨mes. A savoir si quelqu&#8217;un repasse devant le dÃ©tecteur entre la fin de mouvement et l&#8217;extinction de la lampe, elle ne se rallume pas. [pastacode lang=Â Â»cÂ Â» [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>Un mini post pour signaler la mise Ã  jour du script Motion (Ã©clairage sur dÃ©tection de mouvement).</p>
<p>J&rsquo;ai simplement enlevÃ© la partie extinction avec dÃ©lai car cela gÃ©nÃ©rait des problÃ¨mes.</p>
<p>A savoir si quelqu&rsquo;un repasse devant le dÃ©tecteur entre la fin de mouvement et l&rsquo;extinction de la lampe, elle ne se rallume pas.</p>
<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»motionv2.2.luaÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2018/04/27/motion-v2-2/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>Vigicrue v3 beta</title>
		<link>https://domo.easter.fr/2018/01/12/vigicrue-v3-beta/</link>
					<comments>https://domo.easter.fr/2018/01/12/vigicrue-v3-beta/#comments</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 12 Jan 2018 22:40:04 +0000</pubDate>
				<category><![CDATA[Domoticz]]></category>
		<category><![CDATA[lua]]></category>
		<category><![CDATA[notification]]></category>
		<category><![CDATA[Vigicrue]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=143</guid>

					<description><![CDATA[Voici une nouvelle version pour le script Vigicrue. Suite Ã  une demande de balajol sur le forum d&#8217;easydomoticz, j&#8217;ai rajouter la possibilitÃ© d&#8217;Ãªtre notifiÃ©. J&#8217;ai fait le test de mettre une notification sur le sensor Domoticz et Ã§a ne semble pas fonctionner. Du coup je l&#8217;ai ajoutÃ© dans le script, j&#8217;ai modifiÃ© la faÃ§on de [&#8230;]]]></description>
										<content:encoded><![CDATA[<p><img decoding="async" class="alignnone wp-image-9 size-full" src="https://domo.easter.fr/wp-content/uploads/2017/02/domo_capture.png" alt="" width="983" height="181" srcset="https://domo.easter.fr/wp-content/uploads/2017/02/domo_capture.png 983w, https://domo.easter.fr/wp-content/uploads/2017/02/domo_capture-300x55.png 300w, https://domo.easter.fr/wp-content/uploads/2017/02/domo_capture-768x141.png 768w" sizes="(max-width: 983px) 100vw, 983px" /></p>
<p>Voici une nouvelle version pour le script Vigicrue.</p>
<p>Suite Ã  une demande de <a href="http://easydomoticz.com/forum/memberlist.php?mode=viewprofile&amp;u=794">balajol</a> sur le forum d&rsquo;<a href="http://easydomoticz.com/forum/viewtopic.php?f=17&amp;t=5484&amp;start=10#p46650">easydomoticz</a>, j&rsquo;ai rajouter la possibilitÃ© d&rsquo;Ãªtre notifiÃ©.</p>
<p>J&rsquo;ai fait le test de mettre une notification sur le sensor Domoticz et Ã§a ne semble pas fonctionner.</p>
<p>Du coup je l&rsquo;ai ajoutÃ© dans le script, j&rsquo;ai modifiÃ© la faÃ§on de le configurer aussi.</p>
<p>Dans un premier temps, il faut construire le fichier de configuration au format json.</p>
<p>J&rsquo;ai mis sur github trois fichiers de conf diffÃ©rents pour le moment, <a href="https://github.com/chatainsim/scripts_domoticz/blob/master/vigicrue/conf_samples/vigicrue_1_station.json">un pour une station</a>, <a href="https://github.com/chatainsim/scripts_domoticz/blob/master/vigicrue/conf_samples/vigicrue_2_station.json">un pour deux stations</a> et <a href="https://github.com/chatainsim/scripts_domoticz/blob/master/vigicrue/conf_samples/vigicrue_3_station.json">pour trois stations</a>.</p>
<p>Si vous voulez une exemple de fichier de conf pour plus de deux stations, je peux vous le faire, demandez moi.</p>
<p>&nbsp;</p>
<p>Voici Ã  quoi un fichier de configuration ressemble (je pars sur le deux stations comme c&rsquo;est celui que j&rsquo;utilise) :</p>
<p>[pastacode lang=Â Â»markupÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»vigicrue/conf_samples/vigicrue_2_station.jsonÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
<p>Il faut mettre le fichier de conf a un endroit accessible par Domoticz, je l&rsquo;ai mis dans <strong>/opt/domoticz/scripts</strong> mais vous pouvez le mettre ailleurs du moment que Domoticz a les droits pour le lire.</p>
<p>Une prÃ©cision, dans la partie notification, la valeur <strong>test</strong> ne sert Ã  rien pour l&rsquo;instant mais je compte l&rsquo;utiliser pour choisir le mode de test, plus grand que, plus grand ou equal, plus petit, etc &#8230;</p>
<p>Dites moi si c&rsquo;est pertinant ou si le plus grand que suffit.</p>
<p>Dans notification, <strong>value</strong> permet de dÃ©finir le seuil, par exemple si le niveau d&rsquo;eau dÃ©passe 2 mÃ©tres ou 500 m3/s et <strong>active</strong> pour activer ou non la notification (true ou false).</p>
<p>&nbsp;</p>
<p>Voici le script lua, catÃ©gorie lua -&gt; time :</p>
<p>[pastacode lang=Â Â»cÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»vigicrue/vigicrue.luaÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
<p>Les modifications a apporter au script sont les quatre premiÃ¨res variables, Ã  savoir :</p>
<p><strong>debug</strong> : Pour activer le mode debug qui affiche plus d&rsquo;info (pas encore optimisÃ© pour la v3)</p>
<p><strong>config</strong> : Emplacement de votre fichier json de configuration</p>
<p><strong>json</strong> : Emplacement de votre fichier JSON.lua</p>
<p><strong>curl</strong> : Chemin complet vers votre binaire curl</p>
<p>&nbsp;</p>
<p>Pour le moment il faut modifier les commandes de notification manuellement :</p>
<p>[pastacode lang=Â Â»cÂ Â» manual=Â Â»commandArray%5B&rsquo;SendNotification&rsquo;%5D%3D&rsquo;Water%20level%20is%20high%20for%20station%20&prime;..StationName..&rsquo;%23Current%20level%20is%20&prime;..ResultHeight%5B%23ResultHeight%5D%5B2%5D..&rsquo;m%20for%20&prime;..StationName..&rsquo;%230%23sound%23extradata%23telegram&rsquo;%0AcommandArray%5B&rsquo;SendNotification&rsquo;%5D%3D&rsquo;Water%20speed%20level%20is%20high%20for%20station%20&prime;..StationName..&rsquo;%23Current%20speed%20level%3A%20&prime;..ResultSpeed%5B%23ResultSpeed%5D%5B2%5D..&rsquo;m3%2Fs%20for%20&prime;..StationName..&rsquo;%230%23sound%23extradata%23telegram'Â Â» message=Â Â»Â Â» highlight=Â Â»Â Â» provider=Â Â»manualÂ Â»/]</p>
<p>Pour dÃ©finir le type de notification, ici j&rsquo;utilise telegram.</p>
<p>Mais je compte rajouter Ã§a dans le fichier de conf prochainement.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2018/01/12/vigicrue-v3-beta/feed/</wfw:commentRss>
			<slash:comments>17</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
		<item>
		<title>MiFlora v2</title>
		<link>https://domo.easter.fr/2017/12/11/miflora-v2/</link>
					<comments>https://domo.easter.fr/2017/12/11/miflora-v2/#respond</comments>
		
		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Mon, 11 Dec 2017 13:50:00 +0000</pubDate>
				<category><![CDATA[bluetooth]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[xiaomi]]></category>
		<guid isPermaLink="false">https://domo.easter.fr/?p=134</guid>

					<description><![CDATA[Une petite mise Ã  jour au niveau du script pour Miflora. Il y a eu des changements au niveau de la communication via bluetooth apparemment. Du coup le code Ã  Ã©tÃ© mis Ã  jour dans le dÃ©pÃ´t github : https://github.com/open-homeautomation/miflora Il suffit de retourner Ã  l&#8217;emplacement ou vous avez clone le dÃ©pÃ´t la premiere fois [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>Une petite mise Ã  jour au niveau du script pour Miflora.</p>
<p>Il y a eu des changements au niveau de la communication via bluetooth apparemment.</p>
<p>Du coup le code Ã  Ã©tÃ© mis Ã  jour dans le dÃ©pÃ´t github : https://github.com/open-homeautomation/miflora</p>
<p>Il suffit de retourner Ã  l&#8217;emplacement ou vous avez clone le dÃ©pÃ´t la premiere fois et faire un :</p>
<blockquote><p>git pull</p></blockquote>
<p>J&rsquo;ai adaptÃ© le script en fonction :</p>
<p>[pastacode lang=Â Â»pythonÂ Â» user=Â Â»chatainsimÂ Â» repos=Â Â»scripts_domoticzÂ Â» path_id=Â Â»miflorav2.pyÂ Â» revision=Â Â»Â Â» highlight=Â Â»Â Â» lines=Â Â»Â Â» provider=Â Â»githubÂ Â»/]</p>
<p>Pour rappel, le premier script est <a href="https://domo.easter.fr/2017/02/09/mi-flower-et-domoticz/">ici</a> mais chez moi il ne semble plus fonctionner.</p>
<p>Par contre il y a encore la mise en place en crontab qui peut Ãªtre utile.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
]]></content:encoded>
					
					<wfw:commentRss>https://domo.easter.fr/2017/12/11/miflora-v2/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
	</item>
	</channel>
</rss>

<!--
Performance optimized by W3 Total Cache. Learn more: https://www.boldgrid.com/w3-total-cache/?utm_source=w3tc&utm_medium=footer_comment&utm_campaign=free_plugin

Mise en cache de page Ã  lâ€™aide de Disk: Enhanced (Page is feed) 

Served from: domo.easter.fr @ 2026-01-21 12:56:03 by W3 Total Cache
-->