<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	 xmlns:friends="wordpress-plugin-friends:feed-additions:1" 
	>
<channel>
	<title>
	Commentaires surÂ : Vigicrue V2	</title>
	<atom:link href="https://domo.easter.fr/2017/12/11/vigicrue-v2/feed/" rel="self" type="application/rss+xml" />
	<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/</link>
	<description>Home Automation Stuff</description>
	<lastBuildDate>Mon, 20 Apr 2020 11:59:34 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.9</generator>
	<item>
		<title>
		ParÂ : simon		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-492</link>

		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Mon, 20 Apr 2020 11:59:34 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-492</guid>

					<description><![CDATA[En rÃ©ponse Ã  &lt;a href=&quot;https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-490&quot;&gt;Nicio&lt;/a&gt;.

Hello,
Alors, le script fonctionne ? Des infos dans la log ?]]></description>
			<content:encoded><![CDATA[<p>En rÃ©ponse Ã  <a href="https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-490">Nicio</a>.</p>
<p>Hello,<br />
Alors, le script fonctionne ? Des infos dans la log ?</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : Nicio		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-490</link>

		<dc:creator><![CDATA[Nicio]]></dc:creator>
		<pubDate>Sun, 19 Apr 2020 22:36:13 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-490</guid>

					<description><![CDATA[Je suis tombÃ© par hasard sur ce script (en vendnat de data.gouv), juste merci!
J&#039;ai tapÃ© au hasard vigicrue et domoticz et bingo!
Reste plus qu&#039;Ã  le faire marcher :)
Pas d&#039;erreur dans la log, j&#039;ai cru comprendre que le script tournait toutes les demi heures, (ca n&#039;a rien fait Ã  30, on verra demain!)

Merci!]]></description>
			<content:encoded><![CDATA[<p>Je suis tombÃ© par hasard sur ce script (en vendnat de data.gouv), juste merci!<br />
J&rsquo;ai tapÃ© au hasard vigicrue et domoticz et bingo!<br />
Reste plus qu&rsquo;Ã  le faire marcher ðŸ™‚<br />
Pas d&rsquo;erreur dans la log, j&rsquo;ai cru comprendre que le script tournait toutes les demi heures, (ca n&rsquo;a rien fait Ã  30, on verra demain!)</p>
<p>Merci!</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : simon		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-275</link>

		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Fri, 04 Oct 2019 09:39:57 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-275</guid>

					<description><![CDATA[En rÃ©ponse Ã  &lt;a href=&quot;https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-228&quot;&gt;Puzzle 3D&lt;/a&gt;.

Presque 5 mois aprÃ¨s, je viens de faire une modification du script pour recevoir une notification si la station n&#039;existe pas.
https://github.com/chatainsim/scripts_domoticz/blob/master/vigicrue2.lua]]></description>
			<content:encoded><![CDATA[<p>En rÃ©ponse Ã  <a href="https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-228">Puzzle 3D</a>.</p>
<p>Presque 5 mois aprÃ¨s, je viens de faire une modification du script pour recevoir une notification si la station n&rsquo;existe pas.<br />
<a href="https://github.com/chatainsim/scripts_domoticz/blob/master/vigicrue2.lua" rel="nofollow ugc">https://github.com/chatainsim/scripts_domoticz/blob/master/vigicrue2.lua</a></p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : simon		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-229</link>

		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Thu, 16 May 2019 12:17:04 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-229</guid>

					<description><![CDATA[En rÃ©ponse Ã  &lt;a href=&quot;https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-228&quot;&gt;Puzzle 3D&lt;/a&gt;.

Merci pour l&#039;info, je vais essayer de trouver du temps pour modifier cela et prendre en compte l&#039;erreur.]]></description>
			<content:encoded><![CDATA[<p>En rÃ©ponse Ã  <a href="https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-228">Puzzle 3D</a>.</p>
<p>Merci pour l&rsquo;info, je vais essayer de trouver du temps pour modifier cela et prendre en compte l&rsquo;erreur.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : Puzzle 3D		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-228</link>

		<dc:creator><![CDATA[Puzzle 3D]]></dc:creator>
		<pubDate>Thu, 16 May 2019 12:09:30 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-228</guid>

					<description><![CDATA[Bonjour,
Pour info il se peut que du jour au lendemain le script ne renvoi plus rien.
En effet Ã§a arrive si comme pour moi vous avez l&#039;ID de la station qui change, et que celui que vous utilisiez soit stoppÃ©.
Si vous lancer l&#039;url suivant dans mon cas 
https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=X343401001&#038;GrdSerie=H&#038;FormatSortie=simple
vous aurez ce message :
[{&quot;error_msg&quot;:&quot;Code de station inconnu&quot;}]

Ca bloque tout le reste du script du coup, et pas de message d&#039;erreur.

Pour info !]]></description>
			<content:encoded><![CDATA[<p>Bonjour,<br />
Pour info il se peut que du jour au lendemain le script ne renvoi plus rien.<br />
En effet Ã§a arrive si comme pour moi vous avez l&rsquo;ID de la station qui change, et que celui que vous utilisiez soit stoppÃ©.<br />
Si vous lancer l&rsquo;url suivant dans mon cas<br />
<a href="https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=X343401001&#038;GrdSerie=H&#038;FormatSortie=simple" rel="nofollow ugc">https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=X343401001&#038;GrdSerie=H&#038;FormatSortie=simple</a><br />
vous aurez ce message :<br />
[{Â«Â error_msgÂ Â»:Â Â»Code de station inconnuÂ Â»}]</p>
<p>Ca bloque tout le reste du script du coup, et pas de message d&rsquo;erreur.</p>
<p>Pour info !</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : Vigicrue et Domoticz &#8211; Easter&#039;s Domo		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-184</link>

		<dc:creator><![CDATA[Vigicrue et Domoticz &#8211; Easter&#039;s Domo]]></dc:creator>
		<pubDate>Fri, 30 Nov 2018 13:29:03 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-184</guid>

					<description><![CDATA[[&#8230;] Le site Vigicrue a changÃ©, il faut maintenant utiliser le script v2 de Vigicrue ici. Ou la v3 [&#8230;]]]></description>
			<content:encoded><![CDATA[<p>[&#8230;] Le site Vigicrue a changÃ©, il faut maintenant utiliser le script v2 de Vigicrue ici. Ou la v3 [&#8230;]</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : simon		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-58</link>

		<dc:creator><![CDATA[simon]]></dc:creator>
		<pubDate>Wed, 18 Apr 2018 20:23:12 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-58</guid>

					<description><![CDATA[En rÃ©ponse Ã  &lt;a href=&quot;https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-57&quot;&gt;seb vivier&lt;/a&gt;.

Du coup je n&#039;ai pas eu le temps de rÃ©pondre :)
Parfait du coup.]]></description>
			<content:encoded><![CDATA[<p>En rÃ©ponse Ã  <a href="https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-57">seb vivier</a>.</p>
<p>Du coup je n&rsquo;ai pas eu le temps de rÃ©pondre ðŸ™‚<br />
Parfait du coup.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : seb vivier		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-57</link>

		<dc:creator><![CDATA[seb vivier]]></dc:creator>
		<pubDate>Wed, 18 Apr 2018 20:11:21 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-57</guid>

					<description><![CDATA[de nouveau moi, 
Ã§a fonctionne parfaitement, j&#039;ai un peu chercher mais j&#039;ai fini par trouver :) 
maintenant je m&#039;attaque au miflora :)]]></description>
			<content:encoded><![CDATA[<p>de nouveau moi,<br />
Ã§a fonctionne parfaitement, j&rsquo;ai un peu chercher mais j&rsquo;ai fini par trouver ðŸ™‚<br />
maintenant je m&rsquo;attaque au miflora ðŸ™‚</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : seb vivier		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-56</link>

		<dc:creator><![CDATA[seb vivier]]></dc:creator>
		<pubDate>Wed, 18 Apr 2018 18:53:54 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-56</guid>

					<description><![CDATA[quel est la commande pour acceder au crontab et quoi mettre dedans ?]]></description>
			<content:encoded><![CDATA[<p>quel est la commande pour acceder au crontab et quoi mettre dedans ?</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		ParÂ : seb vivier		</title>
		<link>https://domo.easter.fr/2017/12/11/vigicrue-v2/#comment-55</link>

		<dc:creator><![CDATA[seb vivier]]></dc:creator>
		<pubDate>Wed, 18 Apr 2018 18:52:13 +0000</pubDate>
		<guid isPermaLink="false">https://domo.easter.fr/?p=128#comment-55</guid>

					<description><![CDATA[hello, je suis tombÃ© presque par hasard sur votre site. 
je trouve ce script tres interressant, etant Ã  proximitÃ© d&#039;une riviere :) 
le probleme c&#039;est que je suis un noob absolu en script et bienb sur Ã§a ne fonctionne pas. 
en plus je n&#039;ai pas de remonter d&#039;erreur dans les log, du coup je ne vois pas ou est le probleme.
voici mon script modifiÃ©, pouvez vous me dire le probleme  ? 

-- Parameters to change according to you needs
debug=false
-- Station ID, from one to many
Station = {&#039;F466000101&#039;}
-- IDX of sensor for height value &#124; STATION_ID=4061
SIDXHeight = {F466000101=&#039;215&#039;}
-- IDX of sensor for speed value &#124; STATION_ID=4060
SIDXSpeed = {W141001001=&#039;216&#039;}
-- JSON.lua path
json = (loadfile &quot;/home/pi/domoticz/scripts/lua/JSON.lua&quot;)()
-- Curl path
curl = &#039;/usr/bin/curl&#039;
-- End of parameters

time = os.date(&quot;*t&quot;)
-- Function to update sensor
local function update(idx, value1)
    local cmd = idx..&#039;&#124;0&#124;&#039;..value1
    --print(cmd)
    table.insert (commandArray, { [&#039;UpdateDevice&#039;] = cmd } )
end
-- function to get data from url
local function getdata(urlh,urls)
    local DataHeight = assert(io.popen(curl..&#039; -s &quot;&#039;..urlh..&#039;&quot;&#039;))
    local BlocJsonHeight = DataHeight:read(&#039;*all&#039;)
    DataHeight:close()
    local JsonHeight = json:decode(BlocJsonHeight)
    local Height = JsonHeight.Serie.ObssHydro
    
    local DataSpeed = assert(io.popen(curl..&#039; -s &quot;&#039;..urls..&#039;&quot;&#039;))
    local BlocJsonSpeed = DataSpeed:read(&#039;*all&#039;)
    DataSpeed:close()
    local JsonSpeed = json:decode(BlocJsonSpeed)
    local Speed = JsonSpeed.Serie.ObssHydro
    
    return Height, Speed
end
commandArray = {}
if (time.min == 0 or time.min == 30) then
    for k,v in pairs(Station) do
        local IDStation = F466000101
        local IDXHeight = 4061
        local IDXSpeed = 4060
        local urlHeight = &#039;https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=F466000101&#038;GrdSerie=H&#038;FormatSortie=simple&#039;
        local urlSpeed = &#039;https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=F466000101&#038;GrdSerie=Q&#038;FormatSortie=simple&#039;
        ResultHeight,ResultSpeed=getdata(urlHeight,urlSpeed)
 
        if (#ResultHeight ~= 0) then
                if (debug) then print(&quot;ResultHeight: &quot;..ResultHeight[#ResultHeight][2]) end
                update(IDXHeight, ResultHeight[#ResultHeight][2])
        else
                if (debug) then print(&#039;Height level is empty.&#039;) end
        end
        if (#ResultSpeed ~= 0) then
                if (debug) then print(&quot;ResultSpeed: &quot;..ResultSpeed[#ResultSpeed][2]) end
                update(IDXSpeed, ResultSpeed[#ResultSpeed][2])
        else
                if (debug) then print(&#039;Speed is empty.&#039;) end
        end

    end
end

return commandArray

merci par avance de votre aide :)]]></description>
			<content:encoded><![CDATA[<p>hello, je suis tombÃ© presque par hasard sur votre site.<br />
je trouve ce script tres interressant, etant Ã  proximitÃ© d&rsquo;une riviere ðŸ™‚<br />
le probleme c&rsquo;est que je suis un noob absolu en script et bienb sur Ã§a ne fonctionne pas.<br />
en plus je n&rsquo;ai pas de remonter d&rsquo;erreur dans les log, du coup je ne vois pas ou est le probleme.<br />
voici mon script modifiÃ©, pouvez vous me dire le probleme  ? </p>
<p>&#8212; Parameters to change according to you needs<br />
debug=false<br />
&#8212; Station ID, from one to many<br />
Station = {&lsquo;F466000101&prime;}<br />
&#8212; IDX of sensor for height value | STATION_ID=4061<br />
SIDXHeight = {F466000101=&rsquo;215&prime;}<br />
&#8212; IDX of sensor for speed value | STATION_ID=4060<br />
SIDXSpeed = {W141001001=&rsquo;216&rsquo;}<br />
&#8212; JSON.lua path<br />
json = (loadfile Â«Â /home/pi/domoticz/scripts/lua/JSON.luaÂ Â»)()<br />
&#8212; Curl path<br />
curl = &lsquo;/usr/bin/curl&rsquo;<br />
&#8212; End of parameters</p>
<p>time = os.date(Â«Â *tÂ Â»)<br />
&#8212; Function to update sensor<br />
local function update(idx, value1)<br />
    local cmd = idx..&rsquo;|0|&rsquo;..value1<br />
    &#8211;print(cmd)<br />
    table.insert (commandArray, { [&lsquo;UpdateDevice&rsquo;] = cmd } )<br />
end<br />
&#8212; function to get data from url<br />
local function getdata(urlh,urls)<br />
    local DataHeight = assert(io.popen(curl..&rsquo; -s Â«Â &lsquo;..urlh..'Â Â»&lsquo;))<br />
    local BlocJsonHeight = DataHeight:read(&lsquo;*all&rsquo;)<br />
    DataHeight:close()<br />
    local JsonHeight = json:decode(BlocJsonHeight)<br />
    local Height = JsonHeight.Serie.ObssHydro</p>
<p>    local DataSpeed = assert(io.popen(curl..&rsquo; -s Â«Â &lsquo;..urls..'Â Â»&lsquo;))<br />
    local BlocJsonSpeed = DataSpeed:read(&lsquo;*all&rsquo;)<br />
    DataSpeed:close()<br />
    local JsonSpeed = json:decode(BlocJsonSpeed)<br />
    local Speed = JsonSpeed.Serie.ObssHydro</p>
<p>    return Height, Speed<br />
end<br />
commandArray = {}<br />
if (time.min == 0 or time.min == 30) then<br />
    for k,v in pairs(Station) do<br />
        local IDStation = F466000101<br />
        local IDXHeight = 4061<br />
        local IDXSpeed = 4060<br />
        local urlHeight = &lsquo;https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=F466000101&amp;GrdSerie=H&amp;FormatSortie=simple&rsquo;<br />
        local urlSpeed = &lsquo;https://www.vigicrues.gouv.fr/services/observations.json/index.php?CdStationHydro=F466000101&amp;GrdSerie=Q&amp;FormatSortie=simple&rsquo;<br />
        ResultHeight,ResultSpeed=getdata(urlHeight,urlSpeed)</p>
<p>        if (#ResultHeight ~= 0) then<br />
                if (debug) then print(Â«Â ResultHeight: Â«Â ..ResultHeight[#ResultHeight][2]) end<br />
                update(IDXHeight, ResultHeight[#ResultHeight][2])<br />
        else<br />
                if (debug) then print(&lsquo;Height level is empty.&rsquo;) end<br />
        end<br />
        if (#ResultSpeed ~= 0) then<br />
                if (debug) then print(Â«Â ResultSpeed: Â«Â ..ResultSpeed[#ResultSpeed][2]) end<br />
                update(IDXSpeed, ResultSpeed[#ResultSpeed][2])<br />
        else<br />
                if (debug) then print(&lsquo;Speed is empty.&rsquo;) end<br />
        end</p>
<p>    end<br />
end</p>
<p>return commandArray</p>
<p>merci par avance de votre aide ðŸ™‚</p>
]]></content:encoded>
		
			</item>
	</channel>
</rss>

<!--
Performance optimized by W3 Total Cache. Learn more: https://www.boldgrid.com/w3-total-cache/?utm_source=w3tc&utm_medium=footer_comment&utm_campaign=free_plugin

Mise en cache de page Ã  lâ€™aide de Disk: Enhanced (Page is feed) 

Served from: domo.easter.fr @ 2026-01-21 12:58:09 by W3 Total Cache
-->